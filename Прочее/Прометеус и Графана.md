
1ï¸âƒ£ **Prometheus**

- Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸ Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ `prometheus.yml`, Ð´Ð¾Ð±Ð°Ð²Ð¸Ð² ÑÐºÑÐ¿Ð¾Ñ€Ñ‚ÐµÑ€Ð° Kafka (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, `kafka_exporter`).
- ÐŸÑ€Ð¸Ð¼ÐµÑ€ ÐºÐ¾Ð½Ñ„Ð¸Ð³Ð°:
    
    ```yaml
    scrape_configs:
      - job_name: 'kafka'
        static_configs:
          - targets: ['localhost:9308']  # Kafka exporter Ð¿Ð¾Ñ€Ñ‚
    ```
    
- Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸ Prometheus: `prometheus --config.file=prometheus.yml`

2ï¸âƒ£ **Grafana**

- ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð¸ Prometheus ÐºÐ°Ðº **Data Source**.
- Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚Ð¸Ñ€ÑƒÐ¹ Ð³Ð¾Ñ‚Ð¾Ð²Ñ‹Ð¹ **Kafka Dashboard** (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, ID **7589** Ð¸Ð· Grafana Dashboards).

ðŸ”¹ **ÐŸÐ¾Ð¿ÑƒÐ»ÑÑ€Ð½Ñ‹Ðµ Ð¼ÐµÑ‚Ñ€Ð¸ÐºÐ¸ Kafka**

âœ… **ÐŸÑ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ**

- `kafka_server_brokertopicmetrics_messages_in_total` â€“ Ñ‡Ð¸ÑÐ»Ð¾ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹ Ð² Ñ‚Ð¾Ð¿Ð¸ÐºÐµ.
- `kafka_server_brokertopicmetrics_bytes_in_total` â€“ Ð²Ñ…Ð¾Ð´ÑÑ‰Ð¸Ð¹ Ñ‚Ñ€Ð°Ñ„Ð¸Ðº.
- `kafka_server_brokertopicmetrics_bytes_out_total` â€“ Ð¸ÑÑ…Ð¾Ð´ÑÑ‰Ð¸Ð¹ Ñ‚Ñ€Ð°Ñ„Ð¸Ðº.

âœ… **Ð—Ð°Ð´ÐµÑ€Ð¶ÐºÐ¸ Ð¸ Ð»Ð°Ð³Ð¸**

- `kafka_consumer_group_lag` â€“ Ð¾Ñ‚ÑÑ‚Ð°Ð²Ð°Ð½Ð¸Ðµ ÐºÐ¾Ð½ÑÑŽÐ¼ÐµÑ€Ð¾Ð² Ð¾Ñ‚ Ð¿Ñ€Ð¾Ð´ÑŽÑÐµÑ€Ð¾Ð².
- `kafka_network_requestmetrics_request_queue_time_ms` â€“ Ð²Ñ€ÐµÐ¼Ñ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° Ð² Ð¾Ñ‡ÐµÑ€ÐµÐ´ÑŒ.

âœ… **Ð¡Ð¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ Ð±Ñ€Ð¾ÐºÐµÑ€Ð°**

- `kafka_controller_kafkacontroller_activecontrollercount` â€“ Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ð¹ ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ð»ÐµÑ€ (Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ 1).
- `kafka_server_replicamanager_under_replicated_partitions` â€“ ÐºÐ¾Ð»-Ð²Ð¾ Ð½ÐµÐ´Ð¾Ñ€ÐµÐ¿Ð»Ð¸Ñ†Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ñ… Ð¿Ð°Ñ€Ñ‚Ð¸Ñ†Ð¸Ð¹.

ðŸ’¡ **ÐÐ°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ Ð°Ð»ÐµÑ€Ñ‚Ñ‹** Ð² Grafana/Alertmanager: Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, ÐµÑÐ»Ð¸ `consumer_group_lag > X`.