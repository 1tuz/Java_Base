`ConcurrentHashMap` — это потокобезопасная версия `HashMap`, специально разработанная для многопоточных программ. Она позволяет одновременно нескольким потокам безопасно читать и модифицировать данные без явной синхронизации.

Потокобезопасность в `ConcurrentHashMap` обеспечивается несколькими ключевыми механизмами:
1. Локальная блокировка корзин:
	1) В `ConcurrentHashMap` используется **локальная блокировка** на уровне отдельных корзин, а не всей таблицы.
	2) Когда поток записывает данные в определенную корзину (bucket), блокируется только эта корзина. Другие потоки могут работать с другими корзинами одновременно, не мешая друг другу.
2. Чтение без блокировок:
   1) Операции чтения (`get`) выполняются без блокировок. Это возможно, потому что чтение данных из корзин — атомарная операция, которая не влияет на целостность данных.
    Как это работает:
	Потоки могут читать данные одновременно, даже если другие потоки в этот момент добавляют или изменяют данные. Это достигается благодаря отсутствию полной блокировки таблицы.
3. CAS (Compare-And-Swap)
   `CAS` — это механизм, который позволяет атомарно обновлять значения без использования блокировок. Он используется для вставки новых элементов в пустые корзины.
   
   Как работает CAS:
	   1. Поток проверяет, пустая ли корзина (текущее значение).
	   2. Если она пуста, он вставляет элемент.
	   3. Если в момент вставки другая операция уже изменила корзину, поток повторяет попытку, пока не завершит операцию успешно.
	      
4. Сегментированное распределение данных (в Java 7 и ниже):
   1) В более старых версиях `ConcurrentHashMap` (до Java 8) данные делились на сегменты (подразделы таблицы).
   2) Каждый сегмент работал независимо, с локальными блокировками.
   3) Это позволило улучшить производительность за счет работы с меньшими частями таблицы.
      
5. Механизм расширения (Resize):
	1) Когда таблица заполняется, её размер увеличивается. Этот процесс называется **resize**
	2) В отличие от `HashMap`, где вся таблица блокируется, в `ConcurrentHashMap` перераспределение корзин выполняется постепенно.
	3) Несколько потоков могут одновременно помогать переносить свои корзины в новую таблицу, что делает процесс масштабирования более эффективным.

Итог:
Потокобезопасность в `ConcurrentHashMap` достигается за счет:
1. Локальной блокировки отдельных корзин при записи.
2. Использования механизма CAS для атомарных операций.
3. Чтения данных без блокировок.
4. Параллельного расширения таблицы.