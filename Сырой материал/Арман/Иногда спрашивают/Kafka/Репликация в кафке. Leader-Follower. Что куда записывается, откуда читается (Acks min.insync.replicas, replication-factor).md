Kafka использует **репликацию** для обеспечения отказоустойчивости и доступности данных.

Основные понятия:
1. **Репликация** — процесс создания копий данных:
	1) **Репликация факторов (replication-factor)** — это количество копий данных. Например, если `replication-factor=3`, то данные будут храниться на трёх брокерах.
2. **Лидер (Leader)** — главный брокер для конкретной партиции:
	1) Все записи новых сообщений идут **только в лидера**.
	2) У каждой партиции в Kafka всегда один лидер.
3. **Фолловеры (Followers)** — остальные брокеры, которые хранят копии данных:
	1) Они читают данные из лидера и обновляют свои копии.
4. **Acks (Acknowledgments)** — подтверждение записи:
	1) Определяет, сколько реплик должны подтвердить запись, чтобы считать её успешной.

Как записываются данные:
1. **Producer (отправитель)** отправляет сообщение в топик.
2. Данные сначала записываются в **лидера** соответствующей партиции.
3. Лидер передаёт данные всем **фолловерам**, чтобы они синхронизировались.

Как читаются данные:
1. **Consumer (читатель)** всегда читает данные **только из лидера** партиции.
2. Фолловеры используются только для отказоустойчивости, а не для чтения.

Acks (Подтверждения записи):
`acks` определяет, когда Kafka сообщает отправителю, что сообщение успешно записано:
1. acks=1 - Лидер подтверждает запись, как только сохранит данные. _(Фолловеры могут быть не синхронизированы.)_
2. acks=all - Лидер подтверждает запись только после того, как все фолловеры синхронизируются. (Самый надёжный вариант.)
3. acks=0 - Kafka не ждёт подтверждений (быстро, но небезопасно).

min.insync.replicas (Минимальное количество синхронизированных реплик):
1. Это минимальное число реплик (лидер + фолловеры), которые должны быть доступны для успешной записи.
2. Например, если `min.insync.replicas=2`, то хотя бы два брокера должны быть синхронизированы.
**Важно:** Если не хватает доступных реплик, запись будет отклонена (при `acks=all`).

replication-factor (Фактор репликации):
1. Определяет количество копий данных в кластере.
   Например:
	   1) **`replication-factor=1`** — без репликации (риск потери данных при сбое).
	   2) **`replication-factor=3`** — три копии: одна на лидере, две на фолловерах.

Итог:
1. **Данные записываются в лидера**, затем копируются на фолловеров.
2. **Чтение всегда из лидера**, чтобы сохранить порядок и производительность.
3. Репликация защищает от потери данных в случае сбоя: если лидер выходит из строя, Kafka выбирает нового лидера из фолловеров.
4. Надёжность записи управляется через параметры `acks` и `min.insync.replicas`.