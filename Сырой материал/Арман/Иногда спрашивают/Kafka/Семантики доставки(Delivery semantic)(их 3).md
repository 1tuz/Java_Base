В системах, таких как Kafka, используются три типа семантики доставки сообщений. Они описывают, как сообщения передаются от отправителя к получателю и как обрабатываются возможные ошибки.

At most once (Не более одного раза):
1. Сообщение может быть **потеряно**, но не будет доставлено повторно.
2. Это самый быстрый, но наименее надёжный подход.
Пример:
Ты отправил другу сообщение. Если сеть оборвётся, сообщение просто пропадёт.

Когда используется:
1. Когда потеря данных не критична (например, обновление метрик).
2. Приоритет у скорости передачи.


At least once (Не менее одного раза):
1. Сообщение будет доставлено **как минимум один раз**, но может быть доставлено повторно.
2. Это надёжный подход, но получатель должен уметь обрабатывать дубли.
Пример:
Ты отправил другу сообщение. Если он не подтвердит, что получил его, ты отправишь его снова. Друг может получить одно и то же сообщение дважды.

Когда используется:
1. Когда важно, чтобы данные точно были доставлены (например, обработка заказов).
2. Дублирующиеся данные можно отфильтровать или обработать.


Exactly once (Ровно один раз):
1. Сообщение будет доставлено **точно один раз**, даже в случае сбоев.
2. Это наиболее сложный и медленный подход, требующий дополнительных механизмов.
Пример:
Ты отправил другу сообщение. Если он уже получил его, ты больше не отправишь это сообщение.

Когда используется:
1. Для финансовых транзакций, где важно, чтобы каждое действие произошло только один раз.
2. Когда критична точность и согласованность данных.

![[Pasted image 20241219184829.png]]

Итог:
1. **At most once** — быстро, но ненадёжно.
2. **At least once** — надёжно, но возможны дубликаты.
3. **Exactly once** — идеально, но дорого и медленно.