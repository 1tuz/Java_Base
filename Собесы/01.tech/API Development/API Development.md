
#### **REST API**

1. **Основы REST:**
    
    - REST (Representational State Transfer) — это архитектурный стиль взаимодействия между клиентом и сервером через HTTP.
    - Основные принципы:
        - Stateless: Каждый запрос содержит всю необходимую информацию, и сервер не хранит состояние между запросами.
        - Uniform Interface: У API должна быть единообразная структура (например, использование стандартных HTTP-методов).
        - Layered System: Архитектура должна быть разделена на уровни (например, клиент — API Gateway — сервер).
2. **HTTP-методы:**
    
    - **GET:** Для получения данных.
    - **POST:** Для создания ресурсов.
    - **PUT:** Для замены ресурсов.
    - **PATCH:** Для частичного обновления ресурсов.
    - **DELETE:** Для удаления ресурсов.
3. **Коды ответов:**
    
    - 200: Успех.
    - 201: Ресурс создан.
    - 400: Неверный запрос.
    - 401: Неавторизован.
    - 404: Ресурс не найден.
    - 500: Ошибка сервера.
4. **Стандарты проектирования:**
    
    - Используй понятные и логичные URL:
        - Хорошо: `/users/123/orders`.
        - Плохо: `/getUserOrders?id=123`.
    - Для операций над коллекциями добавляй фильтры и сортировку через query параметры: `/users?sort=asc&age>30`.
5. **Документация с OpenAPI:**
    
    - OpenAPI (ранее Swagger) описывает структуру API и генерирует документацию.
    - Пример использования: создание файла `openapi.yaml` для описания всех эндпоинтов и их параметров.
    - Инструменты: Swagger UI (визуальная документация), Postman (тестирование API).
6. **Управление версиями:**
    
    - Версионирование позволяет поддерживать совместимость при изменении API.
    - Подходы:
        - Включать версию в URL: `/v1/users`.
        - Включать версию в заголовки HTTP: `Accept: application/vnd.example.v1+json`.

---

#### **gRPC**

1. **Основы gRPC:**
    
    - gRPC — это RPC-фреймворк (Remote Procedure Call) от Google. Используется для высокопроизводительного взаимодействия между сервисами.
    - В отличие от REST, gRPC использует Protocol Buffers (Protobuf) для сериализации данных. Это быстрее и эффективнее JSON.
2. **Особенности gRPC:**
    
    - Компактные сообщения благодаря бинарному формату.
    - Поддержка потоков: кроме обычного запрос-ответ, можно использовать стриминг данных.
3. **Типы взаимодействия:**
    
    - Unary RPC: Один запрос — один ответ.
    - Server streaming: Клиент отправляет запрос, сервер возвращает поток данных.
    - Client streaming: Клиент отправляет поток запросов, сервер возвращает один ответ.
    - Bidirectional streaming: Оба потока работают одновременно.
4. **Архитектура:**
    
    - Клиент вызывает метод, определённый в `.proto` файле, который генерирует код для клиента и сервера.
    - Сервер реализует сгенерированный интерфейс, а клиент использует stub для вызова методов.
5. **Преимущества gRPC перед REST:**
    
    - Высокая производительность за счёт бинарного формата.
    - Явное описание API через `.proto`.
    - Стриминг упрощает работу с большими объемами данных в реальном времени.
6. **Безопасность:**
    
    - gRPC поддерживает шифрование через TLS.
    - Для аутентификации можно использовать токены (например, JWT), передавая их через метаданные.

---

#### **Обработка ошибок в API:**

1. **REST API:**
    
    - Возвращай детализированные сообщения об ошибках в теле ответа:
        
        ```json
        {
          "error": "Invalid request",
          "details": "The 'name' field is required"
        }
        ```
        
    - Используй правильные коды статуса HTTP, чтобы клиент мог корректно интерпретировать результат.
2. **gRPC:**
    
    - Ошибки обрабатываются через статусы gRPC:
        - `OK`: Успешно.
        - `INVALID_ARGUMENT`: Ошибка запроса.
        - `UNAUTHENTICATED`: Клиент не авторизован.
        - `DEADLINE_EXCEEDED`: Тайм-аут запроса.
    - Передавай детали ошибок с помощью расширенных статусов (например, `StatusRuntimeException` в Java).